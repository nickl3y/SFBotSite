<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <title>Список техники</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    body { font-family: Arial, sans-serif; background: var(--tg-theme-bg-color); color: var(--tg-theme-text-color); padding: 12px;}
    .item { border: 1px solid #ccc; border-radius: 8px; padding: 12px; margin-bottom: 16px; background: var(--tg-theme-button-color);}
    .item h3 { margin-top: 0; }
    .photos { display: flex; gap: 8px; overflow-x: auto; margin-top: 8px;}
    .photos img { height: 100px; border-radius: 6px; cursor: pointer; object-fit: cover;}
    .row { font-size: 15px; margin-top: 5px; }
    .label { font-weight: bold; }
    @media (max-width: 600px) {.photos img {height:70px;}}
  </style>
</head>
<body>
  <h1>Список техники</h1>
  <div id="itemsContainer">Загрузка...</div>
	<script>
	const basePhotoUrl = "http://specteq.ru/photos/";

	fetch("http://specteq.ru/machines")
	  .then(res => {
		if (!res.ok) throw new Error("HTTP " + res.status);
		return res.json();
	  })
	  .then(data => {
		const container = document.getElementById('itemsContainer');
		container.textContent = "";
		data.items.forEach(item => {
		  const div = document.createElement('div');
		  div.classList.add('item');
		  div.innerHTML = `
			<h3>${item.type} ${item.brand} ${item.model}</h3>
			<div class="row"><span class="label">Цена: </span>${item.price}</div>
			<div class="row"><span class="label">Вес: </span>${item.weight}</div>
			<div class="row"><span class="label">Статус: </span>${item.status}</div>
			<div class="row"><span class="label">Описание: </span>${item.comment}</div>
		  `;
		});
	  })
	  .catch(err => {
		document.getElementById('itemsContainer').textContent = "Ошибка: " + err.message;
		console.error("Ошибка при загрузке /machines:", err);
	  });
	</script>
		
</body>
</html>



